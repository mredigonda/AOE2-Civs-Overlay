<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Age of Empires II Civilization Selector</title>
        <link rel="stylesheet" href="./civ-selector.css" />
    </head>
    <body>
        <div id="app">
            <p>Loading civ-selector...</p>
        </div>

        <script src="./civ-selector.js"></script>
        <script>
            // IPC communication for interactive state
            const { ipcRenderer } = require("electron");

            let interactiveTimeout;

            ipcRenderer.on("make-interactive", () => {
                console.log("Making window interactive");
                document.body.style.pointerEvents = "auto";
                document.body.style.userSelect = "auto";

                // Clear any existing timeout
                if (interactiveTimeout) {
                    clearTimeout(interactiveTimeout);
                }

                // Show visual feedback
                const feedback = document.createElement("div");
                feedback.id = "interactive-feedback";
                feedback.textContent = "Window is interactive for 5 seconds...";
                feedback.style.cssText = `
                    position: fixed;
                    top: 10px;
                    right: 10px;
                    background: rgba(0, 255, 0, 0.8);
                    color: white;
                    padding: 10px;
                    border-radius: 5px;
                    z-index: 10000;
                    font-family: Arial, sans-serif;
                    font-size: 14px;
                `;
                document.body.appendChild(feedback);
            });

            ipcRenderer.on("make-non-interactive", () => {
                console.log("Making window non-interactive");
                document.body.style.pointerEvents = "none";
                document.body.style.userSelect = "none";

                // Remove visual feedback
                const feedback = document.getElementById(
                    "interactive-feedback"
                );
                if (feedback) {
                    feedback.remove();
                }
            });
        </script>
        <script>
            // Usage example
            const civs = [
                { code: "ARM", name: "Armenians" },
                { code: "AZT", name: "Aztecs" },
                { code: "BENG", name: "Bengalis" },
                { code: "BER", name: "Berbers" },
                { code: "BOH", name: "Bohemians" },
                { code: "BRI", name: "Britons" },
                { code: "BUL", name: "Bulgarians" },
                { code: "BURGU", name: "Burgundians" },
                { code: "BUR", name: "Burmese" },
                { code: "BYZ", name: "Byzantines" },
                { code: "CEL", name: "Celts" },
                { code: "CHI", name: "Chinese" },
                { code: "CUM", name: "Cumans" },
                { code: "DRAV", name: "Dravidians" },
                { code: "ETH", name: "Ethiopians" },
                { code: "FRK", name: "Franks" },
                { code: "GEO", name: "Georgians" },
                { code: "GOT", name: "Goths" },
                { code: "GURJ", name: "Gurjaras" },
                { code: "HIN", name: "Hindustanis" },
                { code: "HUN", name: "Huns" },
                { code: "INC", name: "Inca" },
                { code: "ITA", name: "Italians" },
                { code: "JAP", name: "Japanese" },
                { code: "JUR", name: "Jurchens" },
                { code: "KHI", name: "Khitans" },
                { code: "KHM", name: "Khmer" },
                { code: "KOR", name: "Koreans" },
                { code: "LIT", name: "Lithuanians" },
                { code: "MAG", name: "Magyars" },
                { code: "MALY", name: "Malay" },
                { code: "MAL", name: "Malians" },
                { code: "MAY", name: "Maya" },
                { code: "MON", name: "Mongols" },
                { code: "PER", name: "Persians" },
                { code: "POL", name: "Poles" },
                { code: "POR", name: "Portuguese" },
                { code: "ROM", name: "Romans" },
                { code: "SAR", name: "Saracens" },
                { code: "SHU", name: "Shu" },
                { code: "SIC", name: "Sicilians" },
                { code: "SLV", name: "Slavs" },
                { code: "SPN", name: "Spanish" },
                { code: "TAT", name: "Tatars" },
                { code: "TEU", name: "Teutons" },
                { code: "TUR", name: "Turks" },
                { code: "VIE", name: "Vietnamese" },
                { code: "VIK", name: "Vikings" },
                { code: "WEI", name: "Wei" },
                { code: "WU", name: "Wu" },
            ];

            // Initialize the civilization selector
            console.log("Initializing civ-selector...");
            console.log("Mount element:", document.getElementById("app"));
            console.log("CivSelect available:", window.CivSelect);

            window.civSelectInstance = window.CivSelect.init({
                mount: document.getElementById("app"),
                civs: civs,
                value: null,
                onChange: function (civ) {
                    console.log("Selected civilization:", civ);
                },
            });

            console.log("Civ-selector initialized:", window.civSelectInstance);
        </script>
    </body>
</html>
